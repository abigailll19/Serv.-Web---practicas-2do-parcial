### ========================================
### PRUEBAS API GATEWAY + GEMINI AI + MCP
### ========================================
### Asegúrate de que estén corriendo:
### - ms-usuario (puerto 3003)
### - ms-resena (puerto 3004)
### - mcp-server (puerto 3001)
### - api-gateway (puerto 3002)
### ========================================

### 1️⃣ TOOL DE BÚSQUEDA: buscar_usuario
### Descripción: Busca usuarios por correo electrónico
### Prueba: Consultar si existe un usuario
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Busca el usuario con correo juan.perez@example.com"
}

### 1.2 Variación - Buscar usuario que no existe
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "¿Existe el usuario no-existe@example.com?"
}

### 1.3 Variación - Pregunta natural
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Necesito verificar si maria.garcia@example.com está registrada en el sistema"
}

### ========================================

### 2️⃣ TOOL DE VALIDACIÓN: validar_resena
### Descripción: Valida reglas de negocio antes de crear reseña
### Prueba: Validar datos correctos
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Valida una reseña con calificación 5, mensaje 'Excelente lugar, muy recomendado' y usuario e5cc14fb-b3ef-444c-b1c7-9db51628e6b0"
}


### 2.2 Validación - Calificación inválida
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Valida una reseña con calificación 10 y mensaje 'Ok' para el usuario a7ac5d63-8640-409b-a9df-a8695c4d06bb"
}

### 2.3 Validación - Mensaje muy corto
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Valida una reseña con calificación 5, mensaje 'Excelente lugar para visitar en familia' y usuario a7ac5d63-8640-409b-a9df-a8695c4d06bb"
}

### 2.4 Validación - Usuario inexistente
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Valida una reseña con calificación 4, mensaje 'Buen lugar para visitar' y usuario 00000000-0000-0000-0000-000000000000"
}

### ========================================

### 3️⃣ TOOL DE ACCIÓN: crear_resena
### Descripción: Ejecuta operación transaccional de crear reseña
### Prueba: Crear reseña completa
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Crea una reseña de 'Playa de Manta' con autor 'Juan Pérez', calificación 5, mensaje 'Hermoso lugar con excelente clima y playas limpias' para el usuario e5cc14fb-b3ef-444c-b1c7-9db51628e6b0"
}

### 3.2 Crear otra reseña
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Registra una reseña del 'Museo Nacional' por 'María García', calificación 4, comentario 'Muy interesante, aprendí mucho sobre la historia local' usuario a7ac5d63-8640-409b-a9df-a8695c4d06bb"
}

### 3.3 Crear reseña con pregunta natural
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Quiero dejar una reseña de 5 estrellas sobre 'Parque Centenario', autor Juan Pérez, dice 'Perfecto para ir en familia, muy bien cuidado' mi usuario es a7ac5d63-8640-409b-a9df-a8695c4d06bb"
}

### ========================================

### 4️⃣ COMBINACIÓN DE TOOLS
### La IA decidirá automáticamente qué tools usar

### 4.1 Buscar y validar
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Busca al usuario juan.perez@example.com y valida si puede crear una reseña con calificación 5 y mensaje 'Excelente servicio'"
}

### 4.2 Validar y crear
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Valida y crea una reseña de 'Catedral Metropolitana', autor Juan Pérez, calificación 5, mensaje 'Arquitectura impresionante, muy recomendado' usuario a7ac5d63-8640-409b-a9df-a8695c4d06bb"
}

### 4.3 Flujo completo: Buscar → Validar → Crear
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Busca al usuario juan.perez@example.com, valida que puede crear una reseña con calificación 4 y mensaje 'Buen lugar para visitar en familia', y si todo está bien créala para el destino 'Malecón 2000'"
}

### ========================================

### 5️⃣ CONVERSACIÓN NATURAL (sin tools)
### Cuando no necesite herramientas, responderá normalmente

### 5.1 Pregunta general
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Hola, ¿qué puedes hacer?"
}

### 5.2 Solicitar información
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Explícame qué herramientas tienes disponibles"
}

### 5.3 Pregunta sobre el sistema
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "¿Cuáles son las reglas para crear una reseña válida?"
}

### ========================================

### 6️⃣ CASOS DE ERROR
### Probar manejo de errores

### 6.1 Buscar usuario sin correo
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Busca un usuario"
}

### 6.2 Crear reseña sin todos los datos
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Crea una reseña de Quito"
}

### 6.3 Validar sin parámetros completos
POST http://localhost:3002/chat
Content-Type: application/json

{
  "mensaje": "Valida una reseña con calificación 5"
}

### ========================================
### NOTAS:
### - Reemplaza 'a7ac5d63-8640-409b-a9df-a8695c4d06bb' con el UUID real de tu usuario
### - Para obtener un UUID válido, primero crea un usuario con POST http://localhost:3003/usuarios
### - La IA interpreta lenguaje natural y decide qué tools ejecutar automáticamente
### ========================================
